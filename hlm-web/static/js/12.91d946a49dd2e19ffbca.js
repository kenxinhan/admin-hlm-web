webpackJsonp([12],{1054:function(t,e,s){function a(t){s(1189)}var l=s(85)(s(1119),s(1297),a,null,null);t.exports=l.exports},1119:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(45),l=s.n(a),r=s(86),i=s(0),n=s.n(i),o=s(56);e.default={data:function(){return{userInfo:this.$cfg.userInfo||o.a.get("userInfo"),cluelist:[],acceptlist:[],userType:"",daterange:[],currentPage:1,total:0,pageSize:10,project:"",status:"",type:"",addr:"",userTypeData:[],activeName:"first",buyShop:"购买门诊",showReceipt:!1,date:"",serverlist:[],serverName:"",noServer:!1}},mounted:function(){this.getUserType();var t=this.$route.query,e=t.activeName,s=t.date,a=t.type;e?(this.activeName=e,this.date=s,this.status="",this.type=a,this.buyShop="下单人",this._UpDateRecomClientNum(0),this.acceptedList()):this.cluesList()},methods:l()({},s.i(r.d)("appVuex",["_UpDateRecomClientNum"]),{handleCurrentChange:function(t){this.currentPage=t,"first"==this.activeName?this.cluesList():this.acceptedList()},cluesList:function(){var t=this,e={start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,project:this.project,status:this.status,addr:this.addr,userType:this.userType};this.$http.post("/api/hx/clue/list.do",e).then(function(e){if(1==e.data.result){var s=e.data.returnObject,a=s.rows,l=s.total;a.forEach(function(t){return t.reserveDate=n()(t.reserveDate).format("YYYY-MM-DD")}),t.cluelist=a,t.total=l}})},acceptedList:function(){var t=this,e={memberNoMerchant:this.userInfo.memberNoMerchant,start:(this.currentPage-1)*this.pageSize,limit:this.pageSize,project:this.project,status:this.status,date:this.date?this.date:"",type:this.type,addr:this.addr,userType:this.userType};this.$http.post("/api/hx/clue/acceptlist.do",e).then(function(e){if(1==e.data.result){var s=e.data.returnObject;t.acceptlist=s.rows,t.total=s.total}})},searchForm:function(){this.date="",this.currentPage=1,"first"==this.activeName?this.cluesList():this.acceptedList()},resetForm:function(){this.currentPage=1,"first"==this.activeName?(this.project="",this.status="",this.addr="",this.userType="",this.cluesList()):(this.project="",this.status="",this.type="",this.addr="",this.date="",this.userType="",this.acceptedList())},handleItemChange:function(t,e){this.currentPage=1,this[t]=e,console.log(t,e),"first"==this.activeName?this.cluesList():this.acceptedList()},handleClick:function(t){"first"==t.name?(this.status="",this.buyShop="购买门诊",this.cluesList()):(this.status="",this.buyShop="下单人",this.acceptedList())},handleDetails:function(t,e){console.log(e),this.$cfg.set("clueMemberInfo",e),this.$router.push({path:"/RobCustomers/"+e.code})},getUserType:function(){var t=this,e={shopNo:this.userInfo.shopNo,merchantNo:this.userInfo.memberNoMerchant,lableNo:"user_type",parentCode:""};this.$http.post("/api/hx/configList.do",e).then(function(e){1==e.data.result&&(t.userTypeData=e.data.returnObject)})},handleReceipt:function(t){this.showReceipt=!0,this.clueCode=t.code,this.shopserverlist(t.userType)},shopserverlist:function(t){var e=this,s={userType:t,memberNoMerchant:this.userInfo.memberNoMerchant};this.$http.post("/api/hx/clue/shopserverlist.do",s).then(function(t){var s=t.data,a=s.result,l=s.errorMessage,r=s.returnObject;1==a?r.length>0?(e.serverlist=r,e.noServer=!1):e.noServer=!0:e.$message(l)})},sureVisiting:function(){var t=this;if(""==this.serverName)return this.$message("请选择抵扣服务"),!1;var e={memberNameMerchant:this.userInfo.memberNameMerchant,memberNoMerchant:this.userInfo.memberNoMerchant,clueCode:this.clueCode,serverCode:this.serverName};this.$http.post("/api/hx/clue/visiting.do",e).then(function(e){console.log(e),1==e.data.result&&"success"==e.data.returnObject&&(t.$message({type:"success",message:"接诊成功"}),t.showReceipt=!1,t.cluesList())})},toShop:function(t){var e=this,s={memberNoGuid:this.userInfo.memberNoGuid,memberNoMerchant:this.userInfo.memberNoMerchant,clueCode:t.code};this.$http.post("/api/hx/clue/toshop.do",s).then(function(t){1==t.data.result&&"success"==t.data.returnObject?(e.$message({type:"success",message:"到店成功"}),e.acceptedList()):e.$message({type:"error",message:t.data.errorMessage})})}})}},1189:function(t,e){},1297:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ChargeMoney"},[s("div",{},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"客户线索",name:"first"}},[s("div",{staticClass:"searchForm"},[s("div",{staticClass:"title"},[s("i"),t._v(" "),s("span",[t._v("筛选查询")])]),t._v(" "),s("el-form",{staticClass:"clearfix"},[s("div",{staticClass:"fSearch-f"},[s("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[s("el-col",{attrs:{xs:12,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"预约项目："}},[s("el-input",{attrs:{placeholder:"预约项目"},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"客户状态："}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.handleItemChange("status",t.status)}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[s("el-option",{attrs:{label:"全部状态",value:""}}),t._v(" "),s("el-option",{attrs:{label:"冻结中",value:"FREEZE"}}),t._v(" "),s("el-option",{attrs:{label:"可抢",value:"CANG"}}),t._v(" "),s("el-option",{attrs:{label:"已被抢",value:"HASG"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"地区："}},[s("el-input",{attrs:{placeholder:"地区"},model:{value:t.addr,callback:function(e){t.addr=e},expression:"addr"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"客户类型: "}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.handleItemChange("userType",t.userType)}},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},[s("el-option",{attrs:{label:"全部类型",value:""}}),t._v(" "),t._l(t.userTypeData,function(t,e){return s("el-option",{key:e,attrs:{label:t.lableName,value:t.code}})})],2)],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:24,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("div",{staticClass:"btnSrarch"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.searchForm()}}},[t._v("查 询")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.resetForm()}}},[t._v("重 置")])],1)])])],1)],1)])],1),t._v(" "),s("div",{staticClass:"listTitle"},[s("i"),t._v(" "),s("span",[t._v("数据列表")])]),t._v(" "),s("el-table",{staticClass:"mb10",attrs:{data:t.cluelist,border:""}},[s("el-table-column",{attrs:{prop:"orderNo",label:"客户编号",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"客户姓名",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"phone",label:"手机号",width:""}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return["MALE"==e.row.sex?s("span",[t._v("男")]):t._e(),t._v(" "),"FEMALE"==e.row.sex?s("span",[t._v("女")]):t._e(),t._v(" "),"UNKNOWN"==e.row.sex?s("span",[t._v("未知")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"age",label:"年龄",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"project",label:"预约项目","min-width":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"addrInfo",label:"所在地区",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"userTypeName",label:"客户类型",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"reserveDate",label:"预计到店时间",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"客户状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return["FREEZE"==e.row.status?s("span",[t._v("冻结中")]):t._e(),t._v(" "),"CANG"==e.row.status?s("span",[t._v("可抢")]):t._e(),t._v(" "),"HASG"==e.row.status?s("span",[t._v("已被抢")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"clinicName",label:t.buyShop,width:""}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["CANG"==e.row.status?s("span",[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.handleReceipt(e.row)}}},[t._v("接诊")])],1):t._e(),t._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.handleDetails(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),t._v(" "),s("el-tab-pane",{attrs:{label:"已接诊客户",name:"second"}},[s("div",{staticClass:"searchForm"},[s("div",{staticClass:"title"},[s("i"),t._v(" "),s("span",[t._v("筛选查询")])]),t._v(" "),s("el-form",{staticClass:"clearfix"},[s("div",{staticClass:"fSearch-f"},[s("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[s("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"预约项目："}},[s("el-input",{attrs:{placeholder:"预约项目"},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"客户状态："}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.handleItemChange("status",t.status)}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[s("el-option",{attrs:{label:"全部状态",value:""}}),t._v(" "),s("el-option",{attrs:{label:"冻结中",value:"FREEZE"}}),t._v(" "),s("el-option",{attrs:{label:"已使用",value:"OK"}}),t._v(" "),s("el-option",{attrs:{label:"已取消",value:"CANCEL"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"接诊类型："}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.handleItemChange("type",t.type)}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[s("el-option",{attrs:{label:"全部状态",value:""}}),t._v(" "),s("el-option",{attrs:{label:"接诊",value:"VISITING"}}),t._v(" "),s("el-option",{attrs:{label:"派单",value:"ORDER"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"地区："}},[s("el-input",{attrs:{placeholder:"地区"},model:{value:t.addr,callback:function(e){t.addr=e},expression:"addr"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:12,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-form-item",{attrs:{size:"small",label:"客户类型;"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.handleItemChange("userType",t.userType)}},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},[s("el-option",{attrs:{label:"全部类型",value:""}}),t._v(" "),t._l(t.userTypeData,function(t,e){return s("el-option",{key:e,attrs:{label:t.lableName,value:t.code}})})],2)],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:24,sm:6,md:6,lg:6,xl:4}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("div",{staticClass:"btnSrarch"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.searchForm()}}},[t._v("查 询")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.resetForm()}}},[t._v("重 置")])],1)])])],1)],1)])],1),t._v(" "),s("div",{staticClass:"listTitle"},[s("i"),t._v(" "),s("span",[t._v("数据列表")])]),t._v(" "),s("el-table",{staticClass:"mb10",attrs:{data:t.acceptlist,border:""}},[s("el-table-column",{attrs:{prop:"orderNo",label:"客户编号",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"客户姓名",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"phone",label:"手机号",width:""}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return["MALE"==e.row.sex?s("span",[t._v("男")]):t._e(),t._v(" "),"FEMALE"==e.row.sex?s("span",[t._v("女")]):t._e(),t._v(" "),"UNKNOWN"==e.row.sex?s("span",[t._v("未知")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"age",label:"年龄",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"project",label:"预约项目","min-width":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"addrInfo",label:"所在地区",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"userTypeName",label:"客户类型",width:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"orderType",label:"接诊类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return["VISITING"==e.row.orderType?s("span",[t._v("接诊")]):t._e(),t._v(" "),"ORDER"==e.row.orderType?s("span",[t._v("派单")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"reserveDate",label:"预计到店时间",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"客户状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return["FREEZE"==e.row.status?s("span",[t._v("冻结中")]):t._e(),t._v(" "),"OK"==e.row.status?s("span",[t._v("已使用")]):t._e(),t._v(" "),"CANCEL"==e.row.status?s("span",[t._v("已取消")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"clinicName",label:t.buyShop,width:""}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return["FREEZE"===e.row.status?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){return t.toShop(e.row)}}},[t._v("确认到店")]):t._e(),t._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.handleDetails(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"接诊提示",visible:t.showReceipt,width:"30%",center:""},on:{"update:visible":function(e){t.showReceipt=e}}},[s("div",{staticStyle:{"text-align":"center",width:"100%",height:"300px",display:"flex","justify-content":"center","align-items":"Center"}},[s("div",[t.noServer?t._e():s("span",[s("span",{staticStyle:{"text-align":"center"}},[t._v("接诊后将扣除服务次数，同时为您新增患者。")]),t._v(" "),s("p",{staticStyle:{"margin-top":"30px"}},[s("span",[t._v("选择抵扣服务：")]),t._v(" "),s("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.serverName,callback:function(e){t.serverName=e},expression:"serverName"}},t._l(t.serverlist,function(e){return s("el-option",{key:e.code,attrs:{label:e.serverName,value:e.code}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.serverName))]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.unuserNum))])])}),1)],1)]),t._v(" "),t.noServer?s("span",[s("span",{staticStyle:{"text-align":"center","margin-bottom":"30px"}},[t._v("您没有服务次数可以抵扣，请先在服务介绍中购买服务。联系电话：4008-705-633")])]):t._e()])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.noServer?t._e():s("span",[s("el-button",{on:{click:function(e){t.showReceipt=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sureVisiting}},[t._v("确 定")])],1),t._v(" "),t.noServer?s("span",[s("el-button",{on:{click:function(e){t.showReceipt=!1}}},[t._v("确 定")])],1):t._e()])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.91d946a49dd2e19ffbca.js.map