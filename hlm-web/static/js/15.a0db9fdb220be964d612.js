webpackJsonp([15],{1047:function(e,a,t){function r(e){t(1172)}var m=t(85)(t(1088),t(1280),r,null,null);e.exports=m.exports},1088:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t(124),m=t.n(r),n=t(56);a.default={data:function(){return{templateList:[],cascaderData:[],userInfo:n.a.get("userInfo"),activeName:"first",dialogTitle:"",filterText:"",modelParent:!1,showFromOther:!1,showPropOther:!1,disTemp:!1,showEditDetail:!1,parentForm:{paramsName:"",teName:"",templateName:"",mainRemark:"",mainCurrentRemark:"",mainPastRemark:"",checkOralRemark:"",checkAuxiliaryRemark:"",planDiagnosisRemark:"",planTreatmentRemark:"",dmDisposalRemark:"",dmMedicalRemark:""},parentRules:{teName:[{required:!0,message:"请填写模板目录名称",trigger:"blur"}],paramsName:[{type:"array",required:!0,message:"请选择上级目录",trigger:"blur"}]},form:{code:"",fatherTemplate:[],templateName:"",mainRemark:"",mainCurrentRemark:"",mainPastRemark:"",checkOralRemark:"",checkAuxiliaryRemark:"",planDiagnosisRemark:"",planTreatmentRemark:"",dmDisposalRemark:"",dmMedicalRemark:""},rules:{templateName:[{required:!0,message:"请填写模板名称",trigger:"blur"}]},addParentCodeVal:"",addParentCodeName:""}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.getTopMenu()},methods:{filterNode:function(e,a){return!e||-1!==a.name.indexOf(e)},getTopMenu:function(){var e=this;this.$http.post("/api/hx/medical/templateList/list.do",{}).then(function(a){if(a.data.result){var t=[];e.cascaderData=e.addDisabled(a.data.returnObject),t=a.data.returnObject,t=JSON.parse(m()(t)),e.templateList=t}else e.$message.error(a.data.errorMessage)})},createTemplate:function(e){this.modelParent=!0,"addParent"==e&&(this.dialogTitle="创建模板目录",this.showPropOther=!1),"add"==e&&(this.dialogTitle="创建模板",this.showPropOther=!0)},treeNodeClick:function(e,a,t){console.log("data:",e,"\n","node:",a,"\n","vuecomponent",t),this.form.fatherTemplate=[],this.form.templateName=e.name,this.form.code=e.code,this.showEditDetail=!0,1==e.levelCode?this.disTemp=!0:(this.form.fatherTemplate=e.parentCodes.split(","),this.disTemp=!1),2==e.type?(this.showFromOther=!0,this.addParentCodeVal=e.parentCode,this.getTemplateDetail(e.code)):this.showFromOther=!1},editTemplate:function(e,a){var t=this;"menu"==a&&(this.form.templateName?this.$http.post("/api/hx/medical/templateList/edit.do",{code:this.form.code,name:this.form.templateName}).then(function(e){e.data.result?(t.$message.success("修改成功"),t.getTopMenu(),t.form.fatherTemplate=[],t.form.code="",t.form.templateName=""):t.$message.error(e.data.errorMessage)}):this.$message.error("请先填写模板名称")),"model"==a&&this.$refs[e].validate(function(a){if(a){var r={name:t.form.templateName,mainRemark:t.form.mainRemark,mainCurrentRemark:t.form.mainCurrentRemark,mainPastRemark:t.form.mainPastRemark,checkOralRemark:t.form.checkOralRemark,checkAuxiliaryRemark:t.form.checkAuxiliaryRemark,planDiagnosisRemark:t.form.planDiagnosisRemark,planTreatmentRemark:t.form.planTreatmentRemark,dmDisposalRemark:t.form.dmDisposalRemark,dmMedicalRemark:t.form.dmMedicalRemark,listCode:t.addParentCodeVal,remark4:t.form.templateName,code:t.form.code};t.$http.post("/api/hx/medical/template/edit.do",r).then(function(a){a.data.result?(t.getTopMenu(),t.$message.success("修改模板成功"),t.form.mainRemark="",t.$refs[e].resetFields()):t.$message.error(a.data.errorMessage)})}}),this.showEditDetail=!1},submitForm:function(e,a){var t=this;"parentForm"==e&&"menu"==a&&this.$refs[e].validate(function(a){a&&t.$http.post("/api/hx/medical/templateList/add.do",{name:t.parentForm.teName,parentCode:t.addParentCodeVal,parentName:t.addParentCodeName.pop()}).then(function(a){a.data.result?(t.$message.success("创建模板目录成功"),t.$refs[e].resetFields(),t.modelParent=!1,t.getTopMenu()):t.$message.error(a.data.errorMessage)})}),"parentForm"==e&&"model"==a&&this.$refs[e].validate(function(a){if(a){var r={name:t.parentForm.teName,mainRemark:t.parentForm.mainRemark,mainCurrentRemark:t.parentForm.mainCurrentRemark,mainPastRemark:t.parentForm.mainPastRemark,checkOralRemark:t.parentForm.checkOralRemark,checkAuxiliaryRemark:t.parentForm.checkAuxiliaryRemark,planDiagnosisRemark:t.parentForm.planDiagnosisRemark,planTreatmentRemark:t.parentForm.planTreatmentRemark,dmDisposalRemark:t.parentForm.dmDisposalRemark,dmMedicalRemark:t.parentForm.dmMedicalRemark,listCode:t.addParentCodeVal,remark:""};t.$http.post("/api/hx/medical/template/add.do",r).then(function(a){a.data.result?(t.$message.success("创建模板成功"),t.modelParent=!1,t.$refs[e].resetFields(),t.getTopMenu()):t.$message.error(a.data.errorMessage)})}})},handleChangeParent:function(e){this.addParentCodeVal=e[e.length-1],this.addParentCodeName=this.$refs.addParentCascader.currentLabels},handleChange:function(e){},remove:function(e,a){var t=this;a.children&&a.children.length>0?this.$alert("请先删除子目录或模板?","提示",{confirmButtonText:"确定",center:!0,callback:function(e){}}):this.$confirm("确定要删除当前模板吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.$http.post("/api/hx/medical/templateList/del.do",{code:a.code,type:a.type}).then(function(e){e.data.result?(t.$message.success("删除成功!"),t.getTopMenu()):t.$message.error(e.data.errorMessage)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getTemplateDetail:function(e){var a=this;this.$http.post("/api/hx/medical/template/get.do",{code:e}).then(function(e){if(e.data.result){var t=e.data.returnObject;a.form.mainRemark=t.mainRemark,a.form.mainCurrentRemark=t.mainCurrentRemark,a.form.mainPastRemark=t.mainPastRemark,a.form.checkOralRemark=t.checkOralRemark,a.form.checkAuxiliaryRemark=t.checkAuxiliaryRemark,a.form.planDiagnosisRemark=t.planDiagnosisRemark,a.form.planTreatmentRemark=t.planTreatmentRemark,a.form.dmDisposalRemark=t.dmDisposalRemark,a.form.dmMedicalRemark=t.dmMedicalRemark}})},cancle:function(){this.showEditDetail=!1,this.form.mainRemark="",this.$refs[formName].resetFields()},addDisabled:function(e){for(var a=0;a<e.length;a++)"2"==e[a].type?e[a].disabled=!0:(e[a].disabled=!1,this.addDisabled(e[a].children));return e}}}},1172:function(e,a){},1280:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"ChargeMoney"},[t("div",{},[t("el-tabs",{model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"病历模板",name:"first"}})],1)],1),e._v(" "),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"container"},[t("div",{staticStyle:{"padding-bottom":"15px","margin-bottom":"15px","border-bottom":"1px solid #f1f1f1"}},[t("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.createTemplate("addParent")}}},[e._v("创建模板目录")]),e._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.createTemplate("add")}}},[e._v("创建模板")])],1),e._v(" "),t("div",{staticClass:"tree-container"},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-input",{attrs:{size:"small",placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(a){e.filterText=a},expression:"filterText"}})],1),e._v(" "),t("el-tree",{ref:"tree",attrs:{data:e.templateList,"node-key":"code","default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.treeNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.node,m=a.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(m.name))]),e._v(" "),1!=m.levelCode?t("span",{staticClass:"fl-r cf"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),function(){return e.remove(r,m)}()}}},[e._v("删除")])],1):e._e()])}}])})],1),e._v(" "),t("div",{staticClass:"detail-container"},[e.showEditDetail?t("div",[t("el-form",{ref:"form",staticStyle:{"max-width":"700px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级目录",prop:"cascader"}},[t("el-cascader",{ref:"myCascader",staticStyle:{width:"400px"},attrs:{disabled:"",options:e.cascaderData,props:{checkStrictly:!0,value:"code",label:"name"},"change-on-select":!0,"expand-trigger":"hover",clearable:""},on:{change:e.handleChange},model:{value:e.form.fatherTemplate,callback:function(a){e.$set(e.form,"fatherTemplate",a)},expression:"form.fatherTemplate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"名称",prop:"templateName"}},[t("el-input",{attrs:{disabled:e.disTemp,placeholder:"请输入模板名称"},model:{value:e.form.templateName,callback:function(a){e.$set(e.form,"templateName",a)},expression:"form.templateName"}})],1),e._v(" "),e.showFromOther?e._e():t("span",[t("el-form-item",[t("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editTemplate("form","menu")}}},[e._v("保存")])],1)],1),e._v(" "),e.showFromOther?t("span",[t("el-form-item",{attrs:{label:"主诉",prop:"mainRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.mainRemark,callback:function(a){e.$set(e.form,"mainRemark",a)},expression:"form.mainRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"现病史",prop:"mainCurrentRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.mainCurrentRemark,callback:function(a){e.$set(e.form,"mainCurrentRemark",a)},expression:"form.mainCurrentRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"既往史",prop:"mainPastRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.mainPastRemark,callback:function(a){e.$set(e.form,"mainPastRemark",a)},expression:"form.mainPastRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"口腔检查",prop:"checkOralRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.checkOralRemark,callback:function(a){e.$set(e.form,"checkOralRemark",a)},expression:"form.checkOralRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"辅助检查",prop:"checkAuxiliaryRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.checkAuxiliaryRemark,callback:function(a){e.$set(e.form,"checkAuxiliaryRemark",a)},expression:"form.checkAuxiliaryRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"诊断",prop:"planDiagnosisRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.planDiagnosisRemark,callback:function(a){e.$set(e.form,"planDiagnosisRemark",a)},expression:"form.planDiagnosisRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"治疗方案",prop:"planTreatmentRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.planTreatmentRemark,callback:function(a){e.$set(e.form,"planTreatmentRemark",a)},expression:"form.planTreatmentRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处置",prop:"dmDisposalRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.dmDisposalRemark,callback:function(a){e.$set(e.form,"dmDisposalRemark",a)},expression:"form.dmDisposalRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"医嘱",prop:"dmMedicalRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.dmMedicalRemark,callback:function(a){e.$set(e.form,"dmMedicalRemark",a)},expression:"form.dmMedicalRemark"}})],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.cancle}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editTemplate("form","model")}}},[e._v("保存")])],1)],1):e._e()],1)],1):e._e()])])]),e._v(" "),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.modelParent,center:""},on:{"update:visible":function(a){e.modelParent=a}}},[t("div",[t("el-form",{ref:"parentForm",staticStyle:{"max-width":"700px","min-height":"400px"},attrs:{model:e.parentForm,rules:e.parentRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级目录",prop:"paramsName"}},[t("el-cascader",{ref:"addParentCascader",staticStyle:{width:"600px"},attrs:{options:e.cascaderData,props:{checkStrictly:!0,value:"code",label:"name",expandTrigger:"hover"},"change-on-select":!0,"expand-trigger":"hover",clearable:""},on:{change:e.handleChangeParent},model:{value:e.parentForm.paramsName,callback:function(a){e.$set(e.parentForm,"paramsName",a)},expression:"parentForm.paramsName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"名称",prop:"teName"}},[t("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.parentForm.teName,callback:function(a){e.$set(e.parentForm,"teName",a)},expression:"parentForm.teName"}})],1),e._v(" "),e.showPropOther?e._e():t("div",[t("br"),t("br"),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitForm("parentForm","menu")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(a){e.modelParent=!1}}},[e._v("取消")])],1)],1),e._v(" "),e.showPropOther?t("div",[t("el-form-item",{attrs:{label:"主诉",prop:"mainRemark"}},[t("el-input",{model:{value:e.parentForm.mainRemark,callback:function(a){e.$set(e.parentForm,"mainRemark",a)},expression:"parentForm.mainRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"现病史",prop:"mainCurrentRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.mainCurrentRemark,callback:function(a){e.$set(e.parentForm,"mainCurrentRemark",a)},expression:"parentForm.mainCurrentRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"既往史",prop:"mainPastRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.mainPastRemark,callback:function(a){e.$set(e.parentForm,"mainPastRemark",a)},expression:"parentForm.mainPastRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"口腔检查",prop:"checkOralRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.checkOralRemark,callback:function(a){e.$set(e.parentForm,"checkOralRemark",a)},expression:"parentForm.checkOralRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"辅助检查",prop:"checkAuxiliaryRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.checkAuxiliaryRemark,callback:function(a){e.$set(e.parentForm,"checkAuxiliaryRemark",a)},expression:"parentForm.checkAuxiliaryRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"诊断",prop:"planDiagnosisRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.planDiagnosisRemark,callback:function(a){e.$set(e.parentForm,"planDiagnosisRemark",a)},expression:"parentForm.planDiagnosisRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"治疗方案",prop:"planTreatmentRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.planTreatmentRemark,callback:function(a){e.$set(e.parentForm,"planTreatmentRemark",a)},expression:"parentForm.planTreatmentRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"处置",prop:"dmDisposalRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.dmDisposalRemark,callback:function(a){e.$set(e.parentForm,"dmDisposalRemark",a)},expression:"parentForm.dmDisposalRemark"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"医嘱",prop:"dmMedicalRemark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.parentForm.dmMedicalRemark,callback:function(a){e.$set(e.parentForm,"dmMedicalRemark",a)},expression:"parentForm.dmMedicalRemark"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitForm("parentForm","model")}}},[e._v("保存")]),e._v(" "),t("el-button",{on:{click:function(a){e.modelParent=!1}}},[e._v("取消")])],1)],1):e._e()],1)],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=15.a0db9fdb220be964d612.js.map